<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Meet Add-on • Stage</title>
  <style>
    html,body{height:100%} body{margin:0;display:grid;place-items:center;
    font-family:system-ui,Segoe UI,Roboto,Inter,Arial,sans-serif;background:#fff}
    .bubble{font-size:40px;padding:18px 22px;border:1px dashed #d1d5db;border-radius:16px}
    .meta{position:fixed;top:10px;right:10px;background:#eef2ff;border-radius:999px;padding:6px 10px;font-size:12px}
  </style>
</head>
<body>
  <div class="meta" id="meta">loading…</div>
  <div id="bubble" class="bubble">Nothing shared yet</div>

  <script type="module">
    import { ensureInitialized, subscribeSharedState } from './sdk-helpers.js';
    const $ = (s) => document.querySelector(s);
    (async () => {
      const ctx = await ensureInitialized();
      $('#meta').textContent = ctx?.meetingId ? `meeting: ${ctx.meetingId}` : 'not in Meet';
      subscribeSharedState((state) => {
        const msg = (state?.message ?? '').trim();
        $('#bubble').textContent = msg || 'Nothing shared yet';
      });
    })();
  </script>
</body>
</html>